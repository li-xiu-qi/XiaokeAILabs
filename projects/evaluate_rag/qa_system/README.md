# QA 问答对生成工作流系统

## 项目概述

该项目是一个自动化生成问答（QA）对并进行评分的工作流系统。它利用 agently 框架编排 AI Agent，调用硅基流动（SiliconFlow）提供的 THUDM/GLM-4-32B-0414 语言模型 API，通过 FastAPI 提供后端服务，配合 React 和 Ant Design 构建的前端界面，实现从文本生成高质量QA对，并支持多维度评分、人工审核与编辑，以及JSON导出。

### 核心特性

- **多输入模式**：支持文件上传（Markdown文件）和直接粘贴文本
- **增量处理**：支持多次输入文本或文件，逐步构建QA知识库
- **AI驱动**：使用大型语言模型生成高质量的问答对
- **多维度评分**：自动评估生成问题的独立性、有用性和可回答性
- **人工审核**：提供友好的界面进行QA对审核、编辑和管理
- **批次管理**：支持按批次和来源筛选和管理QA对
- **JSON导出**：以标准格式导出审核后的QA对

## 文档导航

该项目文档包括以下几个部分，帮助您全面了解系统设计和使用方法：

### 1. [配置管理](./docs/configuration.md)

- 环境变量配置
- 路由与端口设置
- 后端服务配置
- CORS 跨域设置

### 2. [前端设计](./docs/frontend.md)

- 技术栈说明
- 页面结构与组件
- 状态管理与API交互
- UI/UX设计细节

### 3. [后端设计](./docs/backend.md)

- 技术栈说明
- 项目结构
- API路由设计
- agently工作流实现
- 提示词设计
- 错误处理机制

### 4. [增量处理模式](./docs/incremental_mode.md)

- 增量处理概述与使用场景
- 会话管理与状态维护
- 批次与来源管理
- 去重机制
- 最佳实践指南

## 系统架构

下图概述了系统的整体架构和数据流：

```
+------------------------------------------------------+
|                     用户交互层                        |
|  +---------------+        +----------------------+   |
|  | 文件上传/文本输入 |        | QA对展示与审核界面       |   |
|  +---------------+        +----------------------+   |
+------------------------------------------------------+
                 |                      ^
                 v                      |
+------------------------------------------------------+
|                     FastAPI 后端                      |
|  +---------------+    +-------------+  +---------+   |
|  | 文件/文本处理    |    | QA生成/评分  |  | 导出功能  |   |
|  +---------------+    +-------------+  +---------+   |
+------------------------------------------------------+
                 |             ^
                 v             |
+------------------------------------------------------+
|                   agently 工作流                      |
|  +---------------+    +-------------+  +---------+   |
|  | 输入/预处理Agent |    | QA生成Agent |  |评分Agent |   |
|  +---------------+    +-------------+  +---------+   |
+------------------------------------------------------+
                 |             ^
                 v             |
+------------------------------------------------------+
|                   LLM API接口                         |
|           THUDM/GLM-4-32B-0414 (硅基流动)            |
+------------------------------------------------------+
```

## 快速开始

### 环境准备

1. 确保已安装 Python 3.8+ 和 Node.js 14+
2. 创建并激活 Python 虚拟环境
3. 配置必要的环境变量（见[配置文档](./docs/configuration.md)）

### 启动后端

```bash
# 安装依赖
pip install -r requirements.txt

# 启动服务
python main.py
```

### 启动前端

```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 使用流程

1. 通过文件上传或直接输入文本
2. 点击"生成QA对"按钮
3. 在表格中审核、编辑生成的QA对
4. 处理完成后导出为JSON文件

## 更多信息

有关项目的详细开发和使用文档，请参考上述导航中的各个专题文档。